â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  ğŸ”§ SOLUÃ‡ÃƒO RÃPIDA - ADMIN NÃƒO VÃŠ DADOS ğŸ”§                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š STATUS ATUAL:
â”œâ”€ âŒ Admin nÃ£o consegue ver usuÃ¡rios
â”œâ”€ âŒ Admin nÃ£o consegue ver planos
â”œâ”€ âš ï¸  CNES precisa ser obrigatÃ³rio
â””â”€ ğŸ”§ RLS policies precisam de correÃ§Ã£o

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ AÃ‡Ã•ES NECESSÃRIAS (3 PASSOS SIMPLES)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€ PASSO 1: CORRIGIR BANCO DE DADOS (SUPABASE) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  â±ï¸  Tempo: 2 minutos                                                        â”‚
â”‚  ğŸ“ Arquivo: CORRECAO-ADMIN-PLANOS.sql                                      â”‚
â”‚                                                                              â”‚
â”‚  INSTRUÃ‡Ã•ES:                                                                â”‚
â”‚  1. Abra: https://app.supabase.com/                                         â”‚
â”‚  2. Projeto: Seu Projeto SES SP                                            â”‚
â”‚  3. Menu esquerdo â†’ SQL Editor                                              â”‚
â”‚  4. Clique em "New Query"                                                   â”‚
â”‚  5. Copie o CONTEÃšDO TODO do arquivo: CORRECAO-ADMIN-PLANOS.sql           â”‚
â”‚  6. Cole na editor aberta                                                   â”‚
â”‚  7. Pressione Ctrl+Enter OU clique "RUN"                                    â”‚
â”‚                                                                              â”‚
â”‚  âš ï¸  IMPORTANTE: Execute tudo de uma vez! NÃ£o copie linha por linha!       â”‚
â”‚                                                                              â”‚
â”‚  âœ… QUANDO FUNCIONAR:                                                        â”‚
â”‚     - VerÃ¡ diversos SELECT mostrando dados                                  â”‚
â”‚     - Ãšltima linha: "CORREÃ‡ÃƒO COMPLETA!"                                    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ PASSO 2: LIMPAR HISTÃ“RICO E FAZER LOGOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  â±ï¸  Tempo: 1 minuto                                                         â”‚
â”‚                                                                              â”‚
â”‚  INSTRUÃ‡Ã•ES:                                                                â”‚
â”‚  1. Na aplicaÃ§Ã£o, clique o Ã­cone "Sair" (canto superior direito)           â”‚
â”‚  2. Pressione: Ctrl+Shift+Delete                                            â”‚
â”‚     (Abre: "Limpar Dados de NavegaÃ§Ã£o")                                     â”‚
â”‚  3. Marque TODAS as caixas (Cookies, Arquivos, etc.)                        â”‚
â”‚  4. Clique "LIMPAR DADOS"                                                   â”‚
â”‚  5. Feche a aba ou F5 para recarregar                                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ PASSO 3: FAZER LOGIN NOVAMENTE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  â±ï¸  Tempo: 1 minuto                                                         â”‚
â”‚                                                                              â”‚
â”‚  INSTRUÃ‡Ã•ES:                                                                â”‚
â”‚  1. Email: afpereira@saude.sp.gov.br                                       â”‚
â”‚  2. Senha: (sua senha)                                                       â”‚
â”‚  3. Clique "FAZER LOGIN"                                                    â”‚
â”‚  4. Aperte F12 para abrir o Console                                         â”‚
â”‚                                                                              â”‚
â”‚  âœ… DEVE APARECER UM DESTES LOGS (procure com Ctrl+F):                     â”‚
â”‚     - ğŸ”‘ LOGIN - UsuÃ¡rio autenticado                                        â”‚
â”‚     - âœ… Perfil carregado                                                    â”‚
â”‚     - âœ… Role carregado                                                      â”‚
â”‚     - ğŸ¯ setCurrentUser (deve mostrar role: 'admin')                         â”‚
â”‚                                                                              â”‚
â”‚  âš ï¸  SE APARECER âŒ VERMELHO:                                               â”‚
â”‚     - Anote a mensagem exato do erro                                         â”‚
â”‚     - Execute novamente o CORRECAO-ADMIN-PLANOS.sql                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… VERIFICAÃ‡Ã•ES FINAIS

ApÃ³s fazer login, vocÃª DEVE VER:

â”Œâ”€ NO HEADER (CANTO SUPERIOR DIREITO):
â”‚  âœ“ Seu nome: "Seu Nome"
â”‚  âœ“ Sua role: "ADMIN" (em vermelho)
â”‚  âœ“ BotÃ£o de usuÃ¡rios (Ã­cone com pessoas)
â”‚  âœ“ BotÃ£o de sair (Ã­cone sair)

â”œâ”€ AO CLICAR NO BOTÃƒO DE USUÃRIOS:
â”‚  âœ“ Modal abre com a lista de 7 usuÃ¡rios
â”‚  âœ“ Cada usuÃ¡rio mostra: Nome, Email, Role, AÃ§Ãµes
â”‚  âœ“ BotÃµes funcionam: Editar, Promover, Deletar, Desativar

â””â”€ AO IR PARA A PÃGINA DE PLANOS:
   âœ“ Aparecem TODOS os planos (nÃ£o apenas seus)
   âœ“ VocÃª consegue editar qualquer um
   âœ“ VocÃª consegue deletar qualquer um

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ MUDANÃ‡AS TAMBÃ‰M IMPLEMENTADAS NO CÃ“DIGO (App.tsx)

âœ… CNES agora Ã© OBRIGATÃ“RIO ao criar usuÃ¡rio padrÃ£o
   â””â”€ Campo serÃ¡ validado antes de criar
   â””â”€ MÃ¡ximo 8 dÃ­gitos

âœ… Melhor tratamento de erros com logs detalhados
   â””â”€ Console mostrarÃ¡ todos os passos (F12 para ver)
   â””â”€ SerÃ¡ fÃ¡cil diagnosticar problemas

âœ… SeparaÃ§Ã£o correta de dados:
   â”œâ”€ profiles: Nome, Email, CNES (dados pessoais)
   â””â”€ user_roles: Role, Disabled (dados de acesso)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ†˜ TROUBLESHOOTING

PROBLEMA 1: "NÃ£o consigo ver o Ã­cone de usuÃ¡rios"
SOLUÃ‡ÃƒO:
  â†’ Verifique se vocÃª realmente fez logout e login novamente
  â†’ Abra Console (F12) e procure por "ğŸ”‘ LOGIN"
  â†’ Se nÃ£o aparecer, vocÃª nÃ£o fez login corretamente
  â†’ Execute CORRECAO-ADMIN-PLANOS.sql novamente

PROBLEMA 2: "Vi a lista de usuÃ¡rios mas planos nÃ£o aparecem"
SOLUÃ‡ÃƒO:
  â†’ Abra Console (F12)
  â†’ Procure por "ğŸ“‹ loadPlanos"
  â†’ Se houver âŒ vermelho, hÃ¡ erro de RLS
  â†’ Execute CORRECAO-ADMIN-PLANOS.sql novamente

PROBLEMA 3: "Consigo criar usuÃ¡rio mas CNES nÃ£o Ã© validado"
SOLUÃ‡ÃƒO:
  â†’ Recarregue a pÃ¡gina (F5)
  â†’ Tente novamente criar usuÃ¡rio SEM preencher CNES
  â†’ Deve aparecer erro obrigatÃ³rio

PROBLEMA 4: "Banco diz 'CNES column not found'"
SOLUÃ‡ÃƒO:
  â†’ Execute: CORRECAO-ADMIN-PLANOS.sql
  â†’ Ele criarÃ¡ a coluna se nÃ£o existir

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“ SUPORTE TÃ‰CNICO

Se apÃ³s seguir todos os passos ainda nÃ£o funcionar:

1. Abra Console (F12)
2. Procure por âŒ (erros em vermelho)
3. Anote a mensagem exato do erro
4. Execute script de diagnÃ³stico:
   â†’ Arquivo: DIAGNOSTICO-COMPLETO.sql
   â†’ Execute no Supabase SQL Editor
5. Compartilhe:
   - Erro exato do console
   - Resultado do diagnÃ³stico
   - Qual passo nÃ£o funcionou

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‰ PRONTO! Agora execute os 3 passos acima e tudo deve funcionar! ğŸ‰

Qualquer dÃºvida, consulte os arquivos:
â€¢ COMO-CORRIGIR-ADMIN.md (guia detalhado)
â€¢ CORRECAO-ADMIN-PLANOS.sql (script principal)
â€¢ DIAGNOSTICO-COMPLETO.sql (diagnosticar problemas)
â€¢ TESTE-RAPIDO-RLS.sql (testar apÃ³s corrigir)
